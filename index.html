<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>일본어 마이크로러닝 (JPT 700점 · 5일)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: #0f172a;
      color: #e5e7eb;
      display: flex;
      justify-content: center;
      min-height: 100vh;
    }
    .app {
      width: 100%;
      max-width: 480px;
      padding: 16px;
    }
    h1 {
      font-size: 1.4rem;
      margin: 0 0 8px;
    }
    .subtitle {
      font-size: 0.85rem;
      color: #9ca3af;
      margin-bottom: 10px;
    }

    .day-controls {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 10px;
      gap: 8px;
    }
    .day-label {
      font-size: 0.8rem;
      color: #9ca3af;
      letter-spacing: .06em;
    }
    .day-buttons {
      display: flex;
      gap: 4px;
    }
    .day-btn {
      width: 32px;
      height: 28px;
      border-radius: 999px;
      border: 1px solid #334155;
      background: #020617;
      color: #9ca3af;
      font-size: 0.8rem;
      cursor: pointer;
    }
    .day-btn.active {
      background: #38bdf8;
      color: #020617;
      border-color: #38bdf8;
      font-weight: 600;
    }

    .tabs {
      display: flex;
      gap: 4px;
      margin-bottom: 12px;
      background: #020617;
      padding: 4px;
      border-radius: 999px;
    }
    .tab {
      flex: 1;
      padding: 8px;
      text-align: center;
      font-size: 0.85rem;
      cursor: pointer;
      border-radius: 999px;
      border: none;
      background: transparent;
      color: #9ca3af;
    }
    .tab.active {
      background: #38bdf8;
      color: #020617;
      font-weight: 600;
    }
    .card {
      background: #020617;
      border-radius: 16px;
      padding: 16px;
      margin-bottom: 12px;
      box-shadow: 0 10px 25px rgba(15,23,42,0.7);
    }
    .jp-word {
      font-size: 1.6rem;
      margin-bottom: 4px;
    }
    .reading {
      font-size: 0.9rem;
      color: #a5b4fc;
      margin-bottom: 4px;
    }
    .meaning {
      font-size: 1rem;
      color: #fbbf24;
      margin-bottom: 8px;
    }
    .label {
      font-size: 0.75rem;
      color: #9ca3af;
      text-transform: uppercase;
      letter-spacing: .06em;
      margin-top: 8px;
    }
    .sentence-jp {
      font-size: 0.95rem;
      margin-top: 4px;
    }
    .sentence-kr {
      font-size: 0.9rem;
      color: #9ca3af;
      margin-top: 2px;
    }
    .buttons {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-top: 12px;
    }
    .btn {
      flex: 1;
      min-width: 46%;
      padding: 8px 10px;
      font-size: 0.85rem;
      border-radius: 999px;
      border: none;
      cursor: pointer;
      background: #1d4ed8;
      color: white;
    }
    .btn.secondary {
      background: #111827;
      color: #e5e7eb;
      border: 1px solid #374151;
    }
    .btn.full {
      flex: 1 1 100%;
    }
    .progress {
      font-size: 0.8rem;
      color: #9ca3af;
      margin-bottom: 8px;
    }
    .quiz-options {
      display: grid;
      gap: 8px;
      margin-top: 12px;
    }
    .quiz-option {
      padding: 8px 10px;
      border-radius: 999px;
      border: 1px solid #374151;
      cursor: pointer;
      font-size: 0.9rem;
      background: #020617;
      color: #e5e7eb;
      text-align: left;
    }
    .quiz-option.correct {
      border-color: #22c55e;
      background: #022c22;
    }
    .quiz-option.wrong {
      border-color: #ef4444;
      background: #2b0909;
    }
    .quiz-status {
      font-size: 0.85rem;
      margin-top: 8px;
    }
    .badge {
      display: inline-block;
      padding: 2px 8px;
      border-radius: 999px;
      background: #111827;
      font-size: 0.7rem;
      color: #9ca3af;
    }
    .review-list {
      max-height: 60vh;
      overflow-y: auto;
      padding-right: 4px;
    }
    .review-card {
      background: #020617;
      border-radius: 12px;
      padding: 10px 12px;
      margin-bottom: 8px;
      border: 1px solid #111827;
    }
    .small-btn {
      padding: 4px 8px;
      border-radius: 999px;
      border: none;
      font-size: 0.75rem;
      cursor: pointer;
      background: #0ea5e9;
      color: #020617;
    }
    .hint {
      font-size: 0.75rem;
      color: #6b7280;
      margin-top: 4px;
    }
    .reading-title {
      font-size: 1rem;
      font-weight: 600;
      margin-bottom: 6px;
    }
  </style>
</head>
<body>
<div class="app">
  <h1>일본어 마이크로러닝 (JPT 700점 · 5일)</h1>
  <div class="subtitle">DAY 선택 → 단어 20개 → 문장 빈칸 퀴즈 → 오디오 복습 → 장문 읽기</div>

  <div class="day-controls">
    <div class="day-label">오늘 학습 DAY</div>
    <div class="day-buttons" id="day-buttons">
      <button class="day-btn" data-day="0">1</button>
      <button class="day-btn" data-day="1">2</button>
      <button class="day-btn" data-day="2">3</button>
      <button class="day-btn" data-day="3">4</button>
      <button class="day-btn" data-day="4">5</button>
    </div>
  </div>

  <div class="tabs">
    <button class="tab active" data-tab="words">단어 연습</button>
    <button class="tab" data-tab="quiz">문장 퀴즈</button>
    <button class="tab" data-tab="review">오디오 복습</button>
    <button class="tab" data-tab="reading">장문 읽기</button>
  </div>

  <!-- 단어 연습 -->
  <section id="tab-words">
    <div class="progress" id="word-progress"></div>
    <div class="card" id="word-card">
      <div class="jp-word" id="word-jp"></div>
      <div class="reading" id="word-reading"></div>
      <div class="meaning" id="word-meaning"></div>

      <div class="label">예문 (JP)</div>
      <div class="sentence-jp" id="word-sentence-jp"></div>

      <div class="label">해석 (KR)</div>
      <div class="sentence-kr" id="word-sentence-kr"></div>

      <div class="buttons">
        <button class="btn" id="btn-toggle-meaning">뜻/해석 보기</button>
        <button class="btn secondary" id="btn-prev-word">이전</button>
        <button class="btn secondary" id="btn-next-word">다음</button>
        <button class="btn full" id="btn-word-audio">단어+문장 듣기</button>
      </div>
    </div>
    <div class="hint">※ 처음엔 의미를 가리고 일본어만 보고 떠올려 보세요.</div>
  </section>

  <!-- 문장 퀴즈 -->
  <section id="tab-quiz" style="display:none;">
    <div class="progress" id="quiz-progress"></div>
    <div class="card">
      <div class="label">문장</div>
      <div class="sentence-jp" id="quiz-question"></div>
      <div class="sentence-kr" id="quiz-question-kr"></div>

      <div class="label" style="margin-top:12px;">정답 선택</div>
      <div class="quiz-options" id="quiz-options"></div>

      <div class="quiz-status" id="quiz-status"></div>
      <div class="buttons">
        <button class="btn secondary full" id="btn-next-quiz">다음 문제</button>
      </div>
    </div>
    <div class="hint">※ 빈칸에 들어갈 가장 자연스러운 단어를 고르세요.</div>
  </section>

  <!-- 오디오 복습 -->
  <section id="tab-review" style="display:none;">
    <div class="card">
      <div class="label">오늘 학습한 단어 20개</div>
      <div style="margin-top:6px; display:flex; justify-content:space-between; align-items:center;">
        <span class="badge" id="review-badge"></span>
        <button class="small-btn" id="btn-play-all">전체 듣기</button>
      </div>
      <div class="hint">브라우저의 일본어 TTS(음성 합성)를 사용합니다.</div>
    </div>
    <div class="review-list" id="review-list"></div>
  </section>

  <!-- 장문 읽기 -->
  <section id="tab-reading" style="display:none;">
    <div class="card">
      <div class="reading-title" id="reading-title"></div>
      <div class="label">장문 (JP)</div>
      <div class="sentence-jp" id="reading-jp" style="white-space:pre-line;"></div>

      <div class="label">해석 (KR)</div>
      <div class="sentence-kr" id="reading-kr" style="white-space:pre-line;"></div>

      <div class="buttons">
        <button class="btn full" id="btn-reading-audio">장문 전체 듣기</button>
      </div>
    </div>
    <div class="hint">※ JPT 700점 수준의 장문을 천천히 읽으면서 오늘 단어들이 어떻게 쓰이는지 확인해 보세요.</div>
  </section>
</div>

<script>
  // -------------------------------
  // 1. 5일치 JPT 700점 수준 단어 (각 20개)
  // -------------------------------
  // 난이도: 일상 + 비즈니스 중급, 시험에서 자주 나오는 표현 위주
  const WEEK_WORDS = [
    // Day 1 – 회사 생활 기본
    [
      {jp:"出勤",reading:"しゅっきん",meaning:"출근",sentenceJp:"毎朝8時に出勤しています。",sentenceKr:"매일 아침 8시에 출근하고 있습니다."},
      {jp:"退社",reading:"たいしゃ",meaning:"퇴사, 퇴근",sentenceJp:"彼は事情があって会社を退社した。",sentenceKr:"그는 사정이 있어서 회사를 그만두었다."},
      {jp:"会議",reading:"かいぎ",meaning:"회의",sentenceJp:"午後から大事な会議があります。",sentenceKr:"오후에 중요한 회의가 있습니다."},
      {jp:"資料",reading:"しりょう",meaning:"자료",sentenceJp:"会議の資料をメールで送ります。",sentenceKr:"회의 자료를 메일로 보내겠습니다."},
      {jp:"締め切り",reading:"しめきり",meaning:"마감",sentenceJp:"この仕事の締め切りは金曜日です。",sentenceKr:"이 일의 마감은 금요일입니다."},
      {jp:"担当",reading:"たんとう",meaning:"담당",sentenceJp:"私はこのプロジェクトの担当です。",sentenceKr:"저는 이 프로젝트를 담당하고 있습니다."},
      {jp:"部署",reading:"ぶしょ",meaning:"부서",sentenceJp:"異動で新しい部署に配属された。",sentenceKr:"인사 이동으로 새로운 부서에 배치되었다."},
      {jp:"残業",reading:"ざんぎょう",meaning:"야근",sentenceJp:"今日は残業せずに帰りたい。",sentenceKr:"오늘은 야근 안 하고 돌아가고 싶다."},
      {jp:"報告",reading:"ほうこく",meaning:"보고",sentenceJp:"進捗を上司に報告してください。",sentenceKr:"진행 상황을 상사에게 보고해 주세요."},
      {jp:"連絡",reading:"れんらく",meaning:"연락",sentenceJp:"何かあればすぐに連絡してください。",sentenceKr:"무슨 일이 있으면 바로 연락해 주세요."},
      {jp:"確認",reading:"かくにん",meaning:"확인",sentenceJp:"内容をよく確認してから送信してください。",sentenceKr:"내용을 잘 확인한 다음에 전송해 주세요."},
      {jp:"調整",reading:"ちょうせい",meaning:"조정",sentenceJp:"日程を再度調整させていただきます。",sentenceKr:"일정을 다시 조정하겠습니다."},
      {jp:"締める",reading:"しめる",meaning:"조이다, 마무리하다",sentenceJp:"年度末は経費をきちんと締める必要がある。",sentenceKr:"연말에는 경비를 제대로 마무리할 필요가 있다."},
      {jp:"依頼",reading:"いらい",meaning:"의뢰, 부탁",sentenceJp:"先ほどの件、再度依頼してもよろしいでしょうか。",sentenceKr:"아까 그 건, 다시 한 번 부탁드려도 될까요?"},
      {jp:"了承",reading:"りょうしょう",meaning:"양해, 승낙",sentenceJp:"内容をご確認のうえ、ご了承ください。",sentenceKr:"내용을 확인하시고 양해 부탁드립니다."},
      {jp:"検討",reading:"けんとう",meaning:"검토",sentenceJp:"こちらの案について検討いたします。",sentenceKr:"이 안건에 대해 검토하겠습니다."},
      {jp:"調査",reading:"ちょうさ",meaning:"조사",sentenceJp:"市場調査の結果が出ました。",sentenceKr:"시장 조사 결과가 나왔습니다."},
      {jp:"対応",reading:"たいおう",meaning:"대응",sentenceJp:"お客様からのクレームに迅速に対応した。",sentenceKr:"고객 불만에 신속하게 대응했다."},
      {jp:"提出",reading:"ていしゅつ",meaning:"제출",sentenceJp:"レポートの提出期限は明日までです。",sentenceKr:"레포트 제출 기한은 내일까지입니다."},
      {jp:"印刷",reading:"いんさつ",meaning:"인쇄",sentenceJp:"会議用の資料を30部印刷してください。",sentenceKr:"회의용 자료를 30부 인쇄해 주세요."}
    ],
    // Day 2 – 비즈니스 커뮤니케이션
    [
      {jp:"訪問",reading:"ほうもん",meaning:"방문",sentenceJp:"明日は重要なお客様を訪問します。",sentenceKr:"내일은 중요한 고객을 방문합니다."},
      {jp:"商談",reading:"しょうだん",meaning:"상담, 비즈니스 미팅",sentenceJp:"新規取引先との商談が予定されている。",sentenceKr:"새 거래처와의 비즈니스 미팅이 예정되어 있다."},
      {jp:"契約",reading:"けいやく",meaning:"계약",sentenceJp:"契約の内容をもう一度ご確認ください。",sentenceKr:"계약 내용을 한 번 더 확인해 주세요."},
      {jp:"条件",reading:"じょうけん",meaning:"조건",sentenceJp:"条件が合わず、契約には至らなかった。",sentenceKr:"조건이 맞지 않아 계약에 이르지 못했다."},
      {jp:"見積もり",reading:"みつもり",meaning:"견적",sentenceJp:"来週までに見積もりを提出してください。",sentenceKr:"다음 주까지 견적을 제출해 주세요."},
      {jp:"提案",reading:"ていあん",meaning:"제안",sentenceJp:"新しいサービスについて提案させていただきます。",sentenceKr:"새로운 서비스에 대해 제안드리겠습니다."},
      {jp:"説明",reading:"せつめい",meaning:"설명",sentenceJp:"商品の特徴を分かりやすく説明した。",sentenceKr:"상품의 특징을 알기 쉽게 설명했다."},
      {jp:"納得",reading:"なっとく",meaning:"납득",sentenceJp:"お客様に納得していただけるように説明する。",sentenceKr:"고객이 납득할 수 있도록 설명한다."},
      {jp:"合意",reading:"ごうい",meaning:"합의",sentenceJp:"両社は最終的に条件に合意した。",sentenceKr:"양사는 최종적으로 조건에 합의했다."},
      {jp:"印象",reading:"いんしょう",meaning:"인상",sentenceJp:"第一印象がとても良かった。",sentenceKr:"첫인상이 매우 좋았다."},
      {jp:"訪ねる",reading:"たずねる",meaning:"방문하다, 묻다",sentenceJp:"詳しい点は担当者に訪ねてください。",sentenceKr:"자세한 점은 담당자에게 문의해 주세요."},
      {jp:"了承を得る",reading:"りょうしょうをえる",meaning:"양해를 얻다",sentenceJp:"事前に上司の了承を得てから進めた。",sentenceKr:"사전에 상사의 양해를 얻은 뒤 진행했다."},
      {jp:"説得",reading:"せっとく",meaning:"설득",sentenceJp:"取引先を説得するのに時間がかかった。",sentenceKr:"거래처를 설득하는 데 시간이 걸렸다."},
      {jp:"交渉",reading:"こうしょう",meaning:"교섭, 협상",sentenceJp:"価格について長時間交渉した。",sentenceKr:"가격에 대해 오랫동안 협상했다."},
      {jp:"印刷物",reading:"いんさつぶつ",meaning:"인쇄물",sentenceJp:"イベント用の印刷物を業者に頼んだ。",sentenceKr:"이벤트용 인쇄물을 업체에 맡겼다."},
      {jp:"合併",reading:"がっぺい",meaning:"합병",sentenceJp:"二つの会社が合併することになった。",sentenceKr:"두 회사가 합병하게 되었다."},
      {jp:"取引先",reading:"とりひきさき",meaning:"거래처",sentenceJp:"長年付き合いのある取引先だ。",sentenceKr:"오랫동안 거래해 온 거래처이다."},
      {jp:"丁寧",reading:"ていねい",meaning:"정중함, 꼼꼼함",sentenceJp:"丁寧な対応が信頼につながる。",sentenceKr:"정중한 대응이 신뢰로 이어진다."},
      {jp:"調子",reading:"ちょうし",meaning:"상태, 컨디션",sentenceJp:"最近パソコンの調子があまり良くない。",sentenceKr:"요즘 컴퓨터 상태가 별로 좋지 않다."},
      {jp:"至急",reading:"しきゅう",meaning:"지급, 아주 급함",sentenceJp:"至急ご対応いただけますと幸いです。",sentenceKr:"지급으로 대응해 주시면 감사하겠습니다."}
    ],
    // Day 3 – 사내 커뮤니케이션 & 업무 환경
    [
      {jp:"雰囲気",reading:"ふんいき",meaning:"분위기",sentenceJp:"この会社は職場の雰囲気が明るい。",sentenceKr:"이 회사는 직장 분위기가 밝다."},
      {jp:"規則",reading:"きそく",meaning:"규칙",sentenceJp:"社内の規則をよく読んでおいてください。",sentenceKr:"사내 규칙을 잘 읽어 두세요."},
      {jp:"勤務",reading:"きんむ",meaning:"근무",sentenceJp:"現在は在宅勤務が中心です。",sentenceKr:"현재는 재택근무가 중심입니다."},
      {jp:"評価",reading:"ひょうか",meaning:"평가",sentenceJp:"上半期の業績が高く評価された。",sentenceKr:"상반기 실적이 높게 평가되었다."},
      {jp:"昇進",reading:"しょうしん",meaning:"승진",sentenceJp:"彼は課長に昇進した。",sentenceKr:"그는 과장으로 승진했다."},
      {jp:"人事",reading:"じんじ",meaning:"인사",sentenceJp:"人事部から連絡があった。",sentenceKr:"인사부에서 연락이 왔다."},
      {jp:"会費",reading:"かいひ",meaning:"회비",sentenceJp:"懇親会の会費はいくらですか。",sentenceKr:"친목회 회비는 얼마입니까?"},
      {jp:"参加",reading:"さんか",meaning:"참가",sentenceJp:"明日のイベントに参加しますか。",sentenceKr:"내일 이벤트에 참가하나요?"},
      {jp:"欠席",reading:"けっせき",meaning:"결석, 불참",sentenceJp:"体調不良のため会議を欠席した。",sentenceKr:"몸이 안 좋아서 회의에 불참했다."},
      {jp:"案内",reading:"あんない",meaning:"안내",sentenceJp:"新入社員向けの案内メールを作成する。",sentenceKr:"신입사원용 안내 메일을 작성한다."},
      {jp:"社内",reading:"しゃない",meaning:"사내",sentenceJp:"社内でのコミュニケーションを大切にしている。",sentenceKr:"사내 커뮤니케이션을 중요하게 생각한다."},
      {jp:"印鑑",reading:"いんかん",meaning:"도장",sentenceJp:"契約書に印鑑を押してください。",sentenceKr:"계약서에 도장을 찍어 주세요."},
      {jp:"経費",reading:"けいひ",meaning:"경비",sentenceJp:"出張の経費を精算した。",sentenceKr:"출장 경비를 정산했다."},
      {jp:"調子がいい",reading:"ちょうしがいい",meaning:"상태가 좋다",sentenceJp:"今日は仕事の調子がいい。",sentenceKr:"오늘은 일이 잘 풀린다."},
      {jp:"慣れる",reading:"なれる",meaning:"익숙해지다",sentenceJp:"新しい環境にも少しずつ慣れてきた。",sentenceKr:"새로운 환경에도 조금씩 익숙해졌다."},
      {jp:"相談",reading:"そうだん",meaning:"상담, 상의",sentenceJp:"分からないことがあれば、すぐに相談してください。",sentenceKr:"모르는 것이 있으면 바로 상의해 주세요."},
      {jp:"社長",reading:"しゃちょう",meaning:"사장",sentenceJp:"社長の方針が社内に共有された。",sentenceKr:"사장의 방침이 사내에 공유되었다."},
      {jp:"休憩",reading:"きゅうけい",meaning:"휴식",sentenceJp:"少し休憩してから作業を再開しよう。",sentenceKr:"잠깐 쉬었다가 작업을 다시 시작하자."},
      {jp:"電源",reading:"でんげん",meaning:"전원",sentenceJp:"帰る前にパソコンの電源を切ってください。",sentenceKr:"퇴근 전에 컴퓨터 전원을 꺼 주세요."},
      {jp:"配布",reading:"はいふ",meaning:"배포",sentenceJp:"会議の前に資料を配布しておいた。",sentenceKr:"회의 전에 자료를 배포해 두었다."}
    ],
    // Day 4 – 일상 생활 & 소비
    [
      {jp:"家賃",reading:"やちん",meaning:"월세",sentenceJp:"家賃が高くて引っ越しを考えている。",sentenceKr:"월세가 비싸서 이사를 생각하고 있다."},
      {jp:"光熱費",reading:"こうねつひ",meaning:"공과금(수도/전기/가스)",sentenceJp:"光熱費が去年より増えた。",sentenceKr:"공과금이 작년보다 늘었다."},
      {jp:"定期券",reading:"ていきけん",meaning:"정기권",sentenceJp:"通勤のために定期券を買った。",sentenceKr:"통근을 위해 정기권을 샀다."},
      {jp:"乗り換え",reading:"のりかえ",meaning:"환승",sentenceJp:"この駅で地下鉄に乗り換えます。",sentenceKr:"이 역에서 지하철로 갈아탑니다."},
      {jp:"改札",reading:"かいさつ",meaning:"개찰구",sentenceJp:"改札の前で友達と待ち合わせした。",sentenceKr:"개찰구 앞에서 친구와 만나기로 했다."},
      {jp:"渋滞",reading:"じゅうたい",meaning:"교통체증",sentenceJp:"朝の渋滞で会社に遅れそうだ。",sentenceKr:"아침 교통체증 때문에 회사에 늦을 것 같다."},
      {jp:"割引",reading:"わりびき",meaning:"할인",sentenceJp:"このクーポンを使うと10％割引になる。",sentenceKr:"이 쿠폰을 사용하면 10% 할인된다."},
      {jp:"返品",reading:"へんぴん",meaning:"반품",sentenceJp:"サイズが合わなかったので商品を返品した。",sentenceKr:"사이즈가 맞지 않아 상품을 반품했다."},
      {jp:"送料",reading:"そうりょう",meaning:"배송비",sentenceJp:"5千円以上で送料が無料になります。",sentenceKr:"5천 엔 이상이면 배송비가 무료가 됩니다."},
      {jp:"会計",reading:"かいけい",meaning:"계산, 회계",sentenceJp:"お会計は別々でお願いします。",sentenceKr:"계산은 따로 부탁드립니다."},
      {jp:"ポイント",reading:"ポイント",meaning:"포인트",sentenceJp:"ポイントカードはお持ちですか。",sentenceKr:"포인트 카드는 가지고 계신가요?"},
      {jp:"支払い",reading:"しはらい",meaning:"지불, 결제",sentenceJp:"支払いはクレジットカードでお願いします。",sentenceKr:"지불은 신용카드로 부탁드립니다."},
      {jp:"預ける",reading:"あずける",meaning:"맡기다",sentenceJp:"荷物をフロントに預けた。",sentenceKr:"짐을 프런트에 맡겼다."},
      {jp:"日用品",reading:"にちようひん",meaning:"생활용품",sentenceJp:"週末に日用品をまとめて買う。",sentenceKr:"주말에 생활용품을 몰아서 산다."},
      {jp:"家事",reading:"かじ",meaning:"집안일",sentenceJp:"家事と育児の両立は大変だ。",sentenceKr:"집안일과 육아를 병행하는 것은 힘들다."},
      {jp:"貯金",reading:"ちょきん",meaning:"저금",sentenceJp:"毎月少しずつ貯金している。",sentenceKr:"매달 조금씩 저금하고 있다."},
      {jp:"通販",reading:"つうはん",meaning:"통신판매, 온라인 쇼핑",sentenceJp:"最近は通販で買い物をすることが多い。",sentenceKr:"요즘은 온라인 쇼핑으로 물건을 많이 산다."},
      {jp:"宅配",reading:"たくはい",meaning:"택배",sentenceJp:"宅配便の受け取り時間を変更した。",sentenceKr:"택배 수령 시간을 변경했다."},
      {jp:"締め切る",reading:"しめきる",meaning:"마감하다",sentenceJp:"このキャンペーンは今週で締め切ります。",sentenceKr:"이 캠페인은 이번 주로 마감합니다."},
      {jp:"予約",reading:"よやく",meaning:"예약",sentenceJp:"明日の夕食はネットで予約した。",sentenceKr:"내일 저녁은 인터넷으로 예약했다."}
    ],
    // Day 5 – 시험/공부/자기계발
    [
      {jp:"受験",reading:"じゅけん",meaning:"수험, 시험 응시",sentenceJp:"彼は来月の試験を受験する予定だ。",sentenceKr:"그는 다음 달 시험을 볼 예정이다."},
      {jp:"合格",reading:"ごうかく",meaning:"합격",sentenceJp:"努力の結果、ようやく合格できた。",sentenceKr:"노력한 끝에 드디어 합격할 수 있었다."},
      {jp:"不合格",reading:"ふごうかく",meaning:"불합격",sentenceJp:"今回は不合格だったが、次は頑張りたい。",sentenceKr:"이번에는 불합격이었지만 다음에는 노력하고 싶다."},
      {jp:"対策",reading:"たいさく",meaning:"대책, 대비",sentenceJp:"リスニング対策として毎日音声を聞いている。",sentenceKr:"리스닝 대비로 매일 음성을 듣고 있다."},
      {jp:"暗記",reading:"あんき",meaning:"암기",sentenceJp:"単語を暗記するのは大変だ。",sentenceKr:"단어를 암기하는 것은 힘들다."},
      {jp:"復習",reading:"ふくしゅう",meaning:"복습",sentenceJp:"寝る前に今日勉強した内容を復習する。",sentenceKr:"자기 전에 오늘 공부한 내용을 복습한다."},
      {jp:"予習",reading:"よしゅう",meaning:"예습",sentenceJp:"授業の前に必ず予習しておく。",sentenceKr:"수업 전에 반드시 예습해 둔다."},
      {jp:"集中",reading:"しゅうちゅう",meaning:"집중",sentenceJp:"静かなカフェのほうが集中しやすい。",sentenceKr:"조용한 카페가 더 집중하기 쉽다."},
      {jp:"緊張",reading:"きんちょう",meaning:"긴장",sentenceJp:"本番の試験ではとても緊張した。",sentenceKr:"본 시험에서는 매우 긴장했다."},
      {jp:"目標",reading:"もくひょう",meaning:"목표",sentenceJp:"今年の目標はJPT700点を取ることだ。",sentenceKr:"올해 목표는 JPT 700점을 받는 것이다."},
      {jp:"習慣",reading:"しゅうかん",meaning:"습관",sentenceJp:"毎日少しずつ勉強する習慣をつけたい。",sentenceKr:"매일 조금씩 공부하는 습관을 들이고 싶다."},
      {jp:"継続",reading:"けいぞく",meaning:"계속, 지속",sentenceJp:"語学学習は継続することが一番大切だ。",sentenceKr:"어학 공부는 계속하는 것이 가장 중요하다."},
      {jp:"記録",reading:"きろく",meaning:"기록",sentenceJp:"勉強時間をアプリに記録している。",sentenceKr:"공부 시간을 앱에 기록하고 있다."},
      {jp:"効率",reading:"こうりつ",meaning:"효율",sentenceJp:"短い時間で効率よく勉強したい。",sentenceKr:"짧은 시간에 효율적으로 공부하고 싶다."},
      {jp:"理解",reading:"りかい",meaning:"이해",sentenceJp:"意味を理解してから覚えるようにしている。",sentenceKr:"뜻을 이해한 후에 외우도록 하고 있다."},
      {jp:"達成",reading:"たっせい",meaning:"달성",sentenceJp:"小さな目標を一つずつ達成していく。",sentenceKr:"작은 목표를 하나씩 달성해 나간다."},
      {jp:"挫折",reading:"ざせつ",meaning:"좌절",sentenceJp:"何度も挫折しそうになったが、諦めなかった。",sentenceKr:"몇 번이나 좌절할 뻔했지만 포기하지 않았다."},
      {jp:"見直す",reading:"みなおす",meaning:"다시 보다, 재검토하다",sentenceJp:"テストを提出する前に必ず見直す。",sentenceKr:"시험을 제출하기 전에 반드시 다시 확인한다."},
      {jp:"工夫",reading:"くふう",meaning:"궁리, 방법을 짜냄",sentenceJp:"自分に合った勉強法を工夫している。",sentenceKr:"자신에게 맞는 공부법을 궁리하고 있다."},
      {jp:"達成感",reading:"たっせいかん",meaning:"성취감",sentenceJp:"毎日続けることで大きな達成感が得られる。",sentenceKr:"매일 계속함으로써 큰 성취감을 얻을 수 있다."}
    ]
  ];

  const TOTAL_DAYS = WEEK_WORDS.length; // 5
  const WORDS_PER_DAY = 20;
  const flatAllWords = WEEK_WORDS.flat();

  // -------------------------------
  // 1-1. 5일치 장문 (JPT 700 수준)
  // -------------------------------
  const WEEK_PASSAGES = [
    {
      title: "Day 1 장문 – 새로운 직장에 적응하기",
      jp: `私は四月から新しい会社に入社し、毎朝8時に出勤しています。最初の頃は会社までの通勤経路や勤務時間に慣れず、よくミスをしてしまいました。ある日、重要な会議の資料を印刷し忘れてしまい、締め切り直前に慌てて対応することになりました。そのとき、先輩が「分からないことがあれば、遠慮なく相談してね」と声をかけてくれました。それ以来、仕事の進め方や部署ごとの役割について担当の先輩に確認しながら進めるようになり、少しずつ職場の雰囲気にも慣れてきました。今では、日々の報告や提出物の管理にも余裕ができ、仕事に対する自信も少しずつ高まっています。`,
      kr: `저는 4월부터 새로운 회사에 입사하여 매일 아침 8시에 출근하고 있습니다. 처음에는 회사까지의 출근 경로나 근무 시간에 익숙하지 않아 자주 실수를 하곤 했습니다. 어느 날에는 중요한 회의 자료를 인쇄하는 것을 잊어버려, 마감 직전에 허겁지겁 대응해야 했습니다. 그때 선배가 “모르는 게 있으면 부담 갖지 말고 언제든지 상의해”라고 말을 건넸습니다. 그 이후로는 업무 진행 방식이나 부서별 역할에 대해 담당 선배에게 확인하면서 일을 진행하게 되었고, 점점 직장 분위기에도 익숙해졌습니다. 지금은 매일 보고나 제출물 관리에도 여유가 생겨, 일에 대한 자신감도 조금씩 높아지고 있습니다.`
    },
    {
      title: "Day 2 장문 – 첫 번째 상사와의 동행 방문",
      jp: `ある日、私は上司と一緒に取引先を訪問することになりました。新入社員の私は、商談の場に同席するのが初めてだったので、とても緊張していました。事前に契約の条件や見積もりの内容を何度も確認し、上司からいただいた提案資料の説明も繰り返し練習しました。当日、先方の担当者は丁寧に話を聞いてくださり、上司の説明にも納得した様子でした。私は主にメモを取る役割でしたが、途中で質問をされたときには、準備しておいた内容を落ち着いて説明することができました。商談の後、上司から「よく頑張ったね。次は君が中心になって提案してみよう」と言われ、大きな励みになりました。`,
      kr: `어느 날 저는 상사와 함께 거래처를 방문하게 되었습니다. 신입사원인 저는 비즈니스 미팅 자리에 동석하는 것이 처음이라 매우 긴장하고 있었습니다. 사전에 계약 조건과 견적 내용을 여러 번 확인하고, 상사에게 받은 제안 자료의 설명도 반복해서 연습했습니다. 당일, 상대 회사 담당자는 정중하게 이야기를 들어 주었고, 상사의 설명에 대해서도 납득한 듯 보였습니다. 저는 주로 메모를 하는 역할이었지만, 중간에 질문을 받았을 때는 미리 준비해 둔 내용을 침착하게 설명할 수 있었습니다. 미팅이 끝난 후 상사는 “잘 해냈어. 다음에는 네가 중심이 되어 제안해 보자”라고 말해 주었고, 그 말이 큰 힘이 되었습니다.`
    },
    {
      title: "Day 3 장문 – 사내 분위기와 커뮤니케이션",
      jp: `私の会社は社員数が多く、部署もいくつかに分かれていますが、社内の雰囲気は比較的明るいほうだと思います。毎朝の挨拶やちょっとした雑談のおかげで、新入社員の私でも徐々に職場に慣れることができました。また、上司との距離も近く、分からない点があればすぐに相談できる環境が整っています。先日、勤怠システムの不具合について人事部に連絡したところ、担当者が丁寧に対応してくれました。その際、「社内で気になる点があれば、遠慮なく意見を言ってください」と言われ、社員一人ひとりの声を大切にしている会社だと感じました。こうしたコミュニケーションの積み重ねが、社員の評価や昇進にも良い影響を与えているように思います。`,
      kr: `제가 다니는 회사는 직원 수가 많고 부서도 여러 개로 나뉘어 있지만, 사내 분위기는 비교적 밝은 편이라고 생각합니다. 매일 아침 인사와 가벼운 잡담 덕분에 신입사원인 저도 서서히 직장에 적응할 수 있었습니다. 또한 상사와의 거리도 가까워, 모르는 점이 있으면 바로 상의할 수 있는 환경이 갖춰져 있습니다. 얼마 전 근태 시스템에 문제가 있어서 인사부에 연락했더니, 담당자가 정중하게 대응해 주었습니다. 그때 “사내에서 신경 쓰이는 점이 있으면 주저 말고 의견을 말씀해 주세요”라는 말을 듣고, 회사가 직원 한 사람 한 사람의 목소리를 소중히 여긴다는 느낌을 받았습니다. 이런 커뮤니케이션의 축적이 직원의 평가나 승진에도 좋은 영향을 미치는 것 같다고 느꼈습니다.`
    },
    {
      title: "Day 4 장문 – 생활비와 소비 습관을 돌아보다",
      jp: `一人暮らしを始めてから、家賃や光熱費、食費など、毎月の支出が思ったより多いことに気付きました。特に、仕事で疲れた日は外食や通販に頼ってしまい、気が付くとクレジットカードの支払いが増えていることがあります。そこで、最近は家計簿アプリを使って支出を記録し、どこにお金を使っているかを見直すようにしました。また、通勤には定期券を利用し、スーパーの割引デーに日用品をまとめて買うなど、少しずつ工夫をしています。最初は面倒だと思っていましたが、毎月の支出が目に見えて減っていくと、節約がゲームのように楽しく感じるようになりました。将来のためにも、無理のない範囲で貯金を続けていきたいと思っています。`,
      kr: `혼자 살기 시작하고 나서 집세, 공과금, 식비 등 매달 지출이 생각보다 많다는 것을 깨달았습니다. 특히 일이 힘든 날에는 외식이나 온라인 쇼핑에 의존하게 되어, 어느새 카드 결제 금액이 늘어나 있는 경우가 있었습니다. 그래서 요즘은 가계부 앱을 사용해 지출을 기록하고, 돈을 어디에 쓰는지 다시 살펴보게 되었습니다. 또한 통근에는 정기권을 이용하고, 마트 할인날에 생활용품을 한 번에 사는 등 조금씩 방법을 궁리하고 있습니다. 처음에는 귀찮다고 느꼈지만, 매달 지출이 눈에 띄게 줄어드는 것을 보면 절약이 게임처럼 재미있게 느껴지기 시작했습니다. 앞으로를 위해서도 무리가 되지 않는 범위에서 저축을 계속해 나가고 싶습니다.`
    },
    {
      title: "Day 5 장문 – JPT700점을 향한 공부 루틴",
      jp: `私は今年、JPTで700点を取ることを目標にしています。最初は単語を暗記するのがつらくて、何度も挫折しそうになりました。しかし、「毎日30分だけは必ず勉強する」という習慣を作ってから、少しずつ継続できるようになりました。平日は通勤時間にリスニング音声を聞き、寝る前にはその日に学んだ表現を復習しています。また、週末には模擬試験を解いて、自分の弱点を記録し、次の週の対策に生かしています。勉強時間やスコ어の変化をアプリに記録していくと、小さな達成が目に見えて分かるので、大きな達成感につながります。結果が出るまでには時間がかかるかもしれませんが、効率だけを求めず、自分に合ったペースで学習を続けていきたいと思っています。`,
      kr: `저는 올해 JPT에서 700점을 받는 것을 목표로 하고 있습니다. 처음에는 단어를 암기하는 것이 힘들어서 여러 번 포기할 뻔했습니다. 하지만 “하루 30분만은 꼭 공부한다”는 습관을 만들고 나서는 조금씩 꾸준히 계속할 수 있게 되었습니다. 평일에는 출퇴근 시간에 리스닝 음성을 듣고, 자기 전에는 그날 배운 표현을 복습합니다. 또 주말에는 모의시험을 풀어 자신의 약점을 기록하고, 다음 주 대비에 활용합니다. 공부 시간과 점수 변화를 앱에 기록하다 보면 작은 성취가 눈에 보이기 때문에 큰 성취감으로 이어집니다. 결과가 나오기까지는 시간이 걸릴지 모르지만, 효율만을 쫓기보다는 자신에게 맞는 속도로 학습을 계속해 나가고 싶습니다.`
    }
  ];

  // -------------------------------
  // 2. 상태 변수
  // -------------------------------
  let currentDayIndex = parseInt(localStorage.getItem("jp_day_index") || "0", 10);
  if (currentDayIndex < 0 || currentDayIndex >= TOTAL_DAYS) currentDayIndex = 0;

  let todayWords = [];
  let quizItems = [];
  let wordIndex = 0;
  let meaningVisible = false;
  let quizIndex = 0;
  let quizScore = 0;

  // -------------------------------
  // 3. 탭 전환
  // -------------------------------
  const tabs = document.querySelectorAll(".tab");
  tabs.forEach(tab => {
    tab.addEventListener("click", () => {
      tabs.forEach(t => t.classList.remove("active"));
      tab.classList.add("active");
      const target = tab.dataset.tab;
      document.querySelectorAll("section[id^='tab-']").forEach(sec => {
        sec.style.display = sec.id === "tab-" + target ? "block" : "none";
      });
    });
  });

  // -------------------------------
  // 4. Day 선택 버튼
  // -------------------------------
  const dayButtons = document.querySelectorAll(".day-btn");
  function renderDayButtons() {
    dayButtons.forEach(btn => {
      const d = parseInt(btn.dataset.day, 10);
      if (d === currentDayIndex) btn.classList.add("active");
      else btn.classList.remove("active");
    });
  }
  dayButtons.forEach(btn => {
    btn.addEventListener("click", () => {
      const d = parseInt(btn.dataset.day, 10);
      currentDayIndex = d;
      localStorage.setItem("jp_day_index", String(currentDayIndex));
      initDay(); // 새 Day 로드
    });
  });

  // -------------------------------
  // 5. 단어 연습 렌더링
  // -------------------------------
  const elWordProgress = document.getElementById("word-progress");
  const elWordJp = document.getElementById("word-jp");
  const elWordReading = document.getElementById("word-reading");
  const elWordMeaning = document.getElementById("word-meaning");
  const elWordSentenceJp = document.getElementById("word-sentence-jp");
  const elWordSentenceKr = document.getElementById("word-sentence-kr");

  function renderWord() {
    const w = todayWords[wordIndex];
    elWordProgress.textContent = `오늘의 단어 ${wordIndex + 1} / ${WORDS_PER_DAY} · Day ${currentDayIndex + 1}`;
    elWordJp.textContent = w.jp;
    elWordReading.textContent = w.reading;
    elWordSentenceJp.textContent = w.sentenceJp;
    elWordSentenceKr.textContent = w.sentenceKr;
    elWordMeaning.textContent = meaningVisible ? w.meaning : "※ 클릭해서 뜻 보기";
  }

  document.getElementById("btn-toggle-meaning").addEventListener("click", () => {
    meaningVisible = !meaningVisible;
    renderWord();
  });

  document.getElementById("btn-next-word").addEventListener("click", () => {
    wordIndex = (wordIndex + 1) % WORDS_PER_DAY;
    meaningVisible = false;
    renderWord();
  });

  document.getElementById("btn-prev-word").addEventListener("click", () => {
    wordIndex = (wordIndex - 1 + WORDS_PER_DAY) % WORDS_PER_DAY;
    meaningVisible = false;
    renderWord();
  });

  document.getElementById("btn-word-audio").addEventListener("click", () => {
    const w = todayWords[wordIndex];
    speakJa(`${w.jp}。${w.sentenceJp}`);
  });

  // -------------------------------
  // 6. 문장 퀴즈
  // -------------------------------
  function shuffle(arr) {
    const a = arr.slice();
    for (let i = a.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      [a[i], a[j]] = [a[j], a[i]];
    }
    return a;
  }

  function buildQuizItems() {
    quizItems = todayWords.map(w => {
      const blankSentence = w.sentenceJp.includes(w.jp)
        ? w.sentenceJp.replace(w.jp, "＿＿")
        : `＿＿：${w.sentenceJp}`;

      let distractors = flatAllWords.filter(x => x.jp !== w.jp);
      if (distractors.length < 3) {
        distractors = distractors.concat([{jp:"例"}, {jp:"仮説"}, {jp:"補足"}]);
      }
      const others = shuffle(distractors).slice(0,3).map(x => x.jp);
      const options = shuffle([w.jp, ...others]);
      const correctIndex = options.indexOf(w.jp);

      return {
        word: w,
        questionJp: blankSentence,
        questionKr: w.sentenceKr,
        options,
        correctIndex
      };
    });
  }

  const elQuizProgress = document.getElementById("quiz-progress");
  const elQuizQuestion = document.getElementById("quiz-question");
  const elQuizQuestionKr = document.getElementById("quiz-question-kr");
  const elQuizOptions = document.getElementById("quiz-options");
  const elQuizStatus = document.getElementById("quiz-status");
  const elBtnNextQuiz = document.getElementById("btn-next-quiz");

  function renderQuiz() {
    const item = quizItems[quizIndex];
    elQuizProgress.textContent = `문제 ${quizIndex + 1} / ${quizItems.length} · 정답 ${quizScore}개`;
    elQuizQuestion.textContent = item.questionJp;
    elQuizQuestionKr.textContent = item.questionKr;
    elQuizOptions.innerHTML = "";
    elQuizStatus.textContent = "";

    item.options.forEach((opt, idx) => {
      const btn = document.createElement("button");
      btn.className = "quiz-option";
      btn.textContent = opt;
      btn.addEventListener("click", () => {
        const isCorrect = idx === item.correctIndex;
        if (isCorrect) {
          quizScore++;
          btn.classList.add("correct");
          elQuizStatus.textContent = "정답!";
        } else {
          btn.classList.add("wrong");
          elQuizStatus.textContent = `오답. 정답: ${item.word.jp}`;
        }
        Array.from(elQuizOptions.children).forEach(b => b.disabled = true);
      });
      elQuizOptions.appendChild(btn);
    });
  }

  elBtnNextQuiz.addEventListener("click", () => {
    quizIndex++;
    if (quizIndex >= quizItems.length) {
      elQuizStatus.textContent = `퀴즈 완료! 총 ${quizScore} / ${quizItems.length} 문제 정답. 다시 처음부터 시작합니다.`;
      quizIndex = 0;
      quizScore = 0;
    }
    renderQuiz();
  });

  // -------------------------------
  // 7. 오디오 복습
  // -------------------------------
  const elReviewList = document.getElementById("review-list");
  const elReviewBadge = document.getElementById("review-badge");

  function buildReviewList() {
    elReviewList.innerHTML = "";
    elReviewBadge.textContent = `Day ${currentDayIndex + 1} · 단어 ${todayWords.length}개`;
    todayWords.forEach((w, idx) => {
      const div = document.createElement("div");
      div.className = "review-card";
      div.innerHTML = `
        <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:4px;">
          <div>
            <div style="font-size:1.1rem;">${w.jp}</div>
            <div style="font-size:0.8rem; color:#a5b4fc;">${w.reading} · ${w.meaning}</div>
          </div>
          <button class="small-btn" data-idx="${idx}">듣기</button>
        </div>
        <div class="sentence-jp">${w.sentenceJp}</div>
        <div class="sentence-kr">${w.sentenceKr}</div>
      `;
      elReviewList.appendChild(div);
    });
  }

  elReviewList.addEventListener("click", (e) => {
    if (e.target.matches("button.small-btn")) {
      const idx = parseInt(e.target.dataset.idx, 10);
      const w = todayWords[idx];
      speakJa(`${w.jp}。${w.sentenceJp}`);
    }
  });

  document.getElementById("btn-play-all").addEventListener("click", () => {
    let i = 0;
    function playNext() {
      if (i >= todayWords.length) return;
      const w = todayWords[i];
      const utt = new SpeechSynthesisUtterance(`${w.jp}。${w.sentenceJp}`);
      utt.lang = "ja-JP";
      utt.onend = () => { i++; playNext(); };
      window.speechSynthesis.speak(utt);
    }
    playNext();
  });

  // -------------------------------
  // 8. 장문 읽기
  // -------------------------------
  const elReadingTitle = document.getElementById("reading-title");
  const elReadingJp = document.getElementById("reading-jp");
  const elReadingKr = document.getElementById("reading-kr");

  function loadReading() {
    const passage = WEEK_PASSAGES[currentDayIndex] || WEEK_PASSAGES[0];
    elReadingTitle.textContent = passage.title;
    elReadingJp.textContent = passage.jp;
    elReadingKr.textContent = passage.kr;
  }

  document.getElementById("btn-reading-audio").addEventListener("click", () => {
    const passage = WEEK_PASSAGES[currentDayIndex] || WEEK_PASSAGES[0];
    speakJa(passage.jp);
  });

  // -------------------------------
  // 9. 일본어 TTS helper
  // -------------------------------
  function speakJa(text) {
    if (!("speechSynthesis" in window)) {
      alert("이 브라우저는 음성 합성을 지원하지 않습니다.");
      return;
    }
    const utt = new SpeechSynthesisUtterance(text);
    utt.lang = "ja-JP";
    window.speechSynthesis.speak(utt);
  }

  // -------------------------------
  // 10. Day 초기화
  // -------------------------------
  function initDay() {
    todayWords = WEEK_WORDS[currentDayIndex];
    wordIndex = 0;
    meaningVisible = false;
    quizIndex = 0;
    quizScore = 0;
    buildQuizItems();
    buildReviewList();
    loadReading();
    renderDayButtons();
    renderWord();
    renderQuiz();
  }

  // 초기 실행
  initDay();
</script>
</body>
</html>
